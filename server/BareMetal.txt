How to set up a dedicated Blockly Games server from scratch.

1. Provision a Linux server.  This document will assume a Debian distro running
on Google Cloud, but any system will do.

2. Use a Bcrypt generator to encrypt the admin password.
e.g. https://bcrypt-generator.com/
Use this encrypted password in the 'XXXXXXX...' below.

3. SSH to the server.  Issue the following commands:
> sudo apt-get update
> sudo apt-get upgrade
> sudo apt-get install make
> sudo apt-get install git
> sudo apt-get install subversion
> sudo apt-get install default-jre
> sudo apt-get install nginx
> sudo apt-get install fcgiwrap
> sudo ln -s /usr/bin/python3 /usr/bin/python

> sudo useradd -s /bin/bash -m bg-user
> sudo su - bg-user
>   echo 'admin:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' >> .htpasswd
>   history -c
>   chmod o-r .htpasswd
>   touch access.log error.log access8000.log error8000.log javascript.log
>   chmod g+w *.log
>   mkdir -p data/{maze,bird,turtle,movie,music,pond-tutor,pond-duck}
>   chmod g+w data/*
>   git clone -b server-migration https://github.com/google/blockly-games.git
>   cd blockly-games
>   make
>   make deploy
>   wget https://prdownloads.sourceforge.net/awstats/awstats-7.9.tar.gz
>   gunzip awstats-7.9.tar.gz
>   tar -xvf awstats-7.9.tar
>   rm awstats-7.9.tar
>   mv awstats-7.9 awstats
>   cp blockly-games/server/awstats.blockly.games.conf awstats/wwwroot/cgi-bin/
>   mkdir awstats/data
>   /home/bg-user/awstats/wwwroot/cgi-bin/awstats.pl -update -config=blockly.games
>   exit
> sudo chgrp www-data /home/bg-user/.htpasswd
> sudo chown www-data /home/bg-user/*.log
> sudo chown www-data /home/bg-user/data/*
> sudo chgrp -R www-data /home/bg-user/awstats/
> sudo chmod -R g+w /home/bg-user/awstats/
> sudo rm /etc/nginx/sites-enabled/default
> sudo cp ~bg-user/blockly-games/server/blocklygames.conf /etc/nginx/sites-enabled/
> sudo nginx -s reload


Routine maintenance (suggest monthly)

SSH to the server.  Issue the following commands:
> sudo apt-get update
> sudo apt-get upgrade
> sudo su - bg-user
>   cd blockly-games
>   git pull
>   make
>   make deploy
>   exit
> sudo cp ~bg-user/blockly-games/server/blocklygames.conf /etc/nginx/sites-enabled/
> sudo nginx -s reload
